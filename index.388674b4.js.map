{"mappings":"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","sources":["<anon>","src/index.ts","src/shared.ts"],"sourcesContent":["console.log(\"Hello from shared.ts\");\nclass $3c46bcb26ac4815b$export$eb8e52f9a29ae213 {\n    get width() {\n        return this.canvas.width;\n    }\n    get height() {\n        return this.canvas.height;\n    }\n    resizeCanvas() {\n        this.canvas.width = window.innerWidth;\n        this.canvas.height = window.innerHeight;\n    }\n    constructor(id){\n        this.canvas = document.getElementById(id);\n        this.ctx = this.canvas.getContext(\"2d\");\n        this.resizeCanvas();\n        window.addEventListener(\"resize\", this.resizeCanvas);\n    }\n    clear(opacity = 1) {\n        this.ctx.fillStyle = `rgba(0, 0, 0, ${opacity})`;\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n    box(x, y, width, height, color) {\n        this.ctx.fillStyle = color;\n        this.ctx.strokeRect(x, y, width, height);\n    }\n    circle(x, y, radius, color) {\n        this.ctx.fillStyle = color;\n        this.ctx.beginPath();\n        this.ctx.ellipse(x - radius / 2, y - radius / 2, radius, radius, 0, 0, 2 * Math.PI);\n        this.ctx.fill();\n    }\n    addEventListener(evenName, listener) {\n        this.canvas.addEventListener(evenName, listener);\n    }\n}\n\n\nconst $b4e14b6b8da86996$var$globalParams = {\n    isRunning: false,\n    radius: 2,\n    edgeDumping: 0,\n    friction: 50,\n    nucleusRepulsion: 0.5,\n    margin: 0,\n    mouseInteraction: false,\n    backgroundOpacity: 1,\n    gravity: {\n        enabled: false,\n        force: 0.1\n    },\n    randomizeRules: ()=>{\n        $b4e14b6b8da86996$var$randomizeRules();\n    }\n};\n// @ts-expect-error\nconst $b4e14b6b8da86996$var$controlGui = new lil.GUI();\n$b4e14b6b8da86996$var$controlGui.close();\nconst $b4e14b6b8da86996$var$globalSettingsFolder = $b4e14b6b8da86996$var$controlGui.addFolder(\"Global settings\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"isRunning\").name(\"Is running\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"radius\", 1, 5).name(\"Particle radius\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"edgeDumping\", 0, 1, 0.01).name(\"Edge dumping\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"friction\", 0, 1000, 0.1).name(\"Friction\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"nucleusRepulsion\", 0, 1, 0.01).name(\"Nucleus repulsion\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"margin\", 0, 100, 1).name(\"Margin\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"mouseInteraction\").name(\"Mouse interaction\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"backgroundOpacity\", 0, 1, 0.01).name(\"Background opacity\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams, \"randomizeRules\").name(\"Randomize rules\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams.gravity, \"enabled\").name(\"Gravity enabled\");\n$b4e14b6b8da86996$var$globalSettingsFolder.add($b4e14b6b8da86996$var$globalParams.gravity, \"force\", 0, 1, 0.01).name(\"Gravity force\");\nconst $b4e14b6b8da86996$var$canvas = new (0, $3c46bcb26ac4815b$export$eb8e52f9a29ae213)(\"canvas\");\n// const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n// const ctx = canvas.getContext(\"2d\")!;\n// resizeCanvas();\n// window.addEventListener(\"resize\", resizeCanvas);\nconst $b4e14b6b8da86996$var$GROUPS = [\n    \"Group 1\",\n    \"Group 2\",\n    \"Group 3\"\n];\nconst $b4e14b6b8da86996$var$colorTheme = {\n    background: `rgba(0, 0, 0, ${$b4e14b6b8da86996$var$globalParams.backgroundOpacity})`,\n    // groups: [\"#FF18C8\", \"#1BEAFF\", \"#7BFF00\"],\n    groups: {\n        [$b4e14b6b8da86996$var$GROUPS[0]]: \"#FF18C8\",\n        [$b4e14b6b8da86996$var$GROUPS[1]]: \"#1BEAFF\",\n        [$b4e14b6b8da86996$var$GROUPS[2]]: \"#7BFF00\"\n    }\n};\nconst $b4e14b6b8da86996$var$rules = [];\nfor (const who of $b4e14b6b8da86996$var$GROUPS){\n    for (const to of $b4e14b6b8da86996$var$GROUPS)$b4e14b6b8da86996$var$rules.push({\n        who: who,\n        to: to,\n        distance: 100,\n        attraction: 0\n    });\n    $b4e14b6b8da86996$var$rules.push({\n        who: who,\n        to: \"mouse\",\n        distance: 100,\n        attraction: 0\n    });\n    $b4e14b6b8da86996$var$rules.push({\n        who: who,\n        to: \"gravity\",\n        distance: Number.MAX_VALUE,\n        attraction: ()=>$b4e14b6b8da86996$var$globalParams.gravity.force\n    });\n}\nconst $b4e14b6b8da86996$var$rulesFolder = $b4e14b6b8da86996$var$controlGui.addFolder(\"Rules\");\n$b4e14b6b8da86996$var$rulesFolder.close();\nfor (const group of $b4e14b6b8da86996$var$GROUPS){\n    const groupRules = $b4e14b6b8da86996$var$rules.filter((r)=>r.who === group && r.to !== \"gravity\");\n    const groupFolder = $b4e14b6b8da86996$var$rulesFolder.addFolder(group);\n    groupFolder.addColor($b4e14b6b8da86996$var$colorTheme.groups, group).name(\"Color\");\n    for (const rule of groupRules){\n        const ruleFolder = groupFolder.addFolder(rule.to);\n        ruleFolder.add(rule, \"distance\", 0, 1000).name(\"Distance\");\n        ruleFolder.add(rule, \"attraction\", -1, 1, 0.01).name(\"Attraction\");\n        ruleFolder.close();\n    }\n    groupFolder.close();\n}\nconst $b4e14b6b8da86996$var$mousePosition = {\n    x: 0,\n    y: 0\n};\nfunction $b4e14b6b8da86996$var$addParticles(group, count) {\n    return Array.from({\n        length: count\n    }).map(()=>({\n            x: Math.random() * $b4e14b6b8da86996$var$canvas.width,\n            y: Math.random() * $b4e14b6b8da86996$var$canvas.height,\n            group: group,\n            vx: (Math.random() - 1) / 1000,\n            vy: (Math.random() - 1) / 1000\n        }));\n}\nconst $b4e14b6b8da86996$var$particles = $b4e14b6b8da86996$var$GROUPS.flatMap((c)=>$b4e14b6b8da86996$var$addParticles(c, 300));\nfunction $b4e14b6b8da86996$var$bounceLimits(particle) {\n    const heightMargin = $b4e14b6b8da86996$var$canvas.height / 2 * ($b4e14b6b8da86996$var$globalParams.margin / 100);\n    const widthMargin = $b4e14b6b8da86996$var$canvas.width / 2 * ($b4e14b6b8da86996$var$globalParams.margin / 100);\n    if (particle.y > $b4e14b6b8da86996$var$canvas.height - heightMargin) {\n        particle.vy *= -1 + $b4e14b6b8da86996$var$globalParams.edgeDumping;\n        particle.y = $b4e14b6b8da86996$var$canvas.height - heightMargin;\n    }\n    if (particle.y < heightMargin) {\n        particle.vy *= -1 + $b4e14b6b8da86996$var$globalParams.edgeDumping;\n        particle.y = heightMargin;\n    }\n    if (particle.x > $b4e14b6b8da86996$var$canvas.width - widthMargin) {\n        particle.vx *= -1 + $b4e14b6b8da86996$var$globalParams.edgeDumping;\n        particle.x = $b4e14b6b8da86996$var$canvas.width - widthMargin;\n    }\n    if (particle.x < 0 + widthMargin) {\n        particle.vx *= -1 + $b4e14b6b8da86996$var$globalParams.edgeDumping;\n        particle.x = widthMargin;\n    }\n}\nfunction $b4e14b6b8da86996$var$bounceDistance(p1, p2) {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return [\n        distance,\n        dx,\n        dy\n    ];\n}\nfunction $b4e14b6b8da86996$var$infinityDistance(p1, p2) {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return [\n        distance,\n        dx,\n        dy\n    ];\n}\nfunction $b4e14b6b8da86996$var$inifintyLoop(particle) {\n    if (particle.y > $b4e14b6b8da86996$var$canvas.height) particle.y = 0;\n    if (particle.y < 0) particle.y = $b4e14b6b8da86996$var$canvas.height;\n    if (particle.x > $b4e14b6b8da86996$var$canvas.width) particle.x = 0;\n    if (particle.x < 0) particle.x = $b4e14b6b8da86996$var$canvas.width;\n}\nfunction $b4e14b6b8da86996$var$applyAttraction(p1, p2) {\n    const rule = $b4e14b6b8da86996$var$rules.find((r)=>{\n        return r.who === p1.group && r.to === p2.group;\n    });\n    if (!rule) return;\n    let fx = 0;\n    let fy = 0;\n    const [distance, dx, dy] = $b4e14b6b8da86996$var$bounceDistance(p1, p2);\n    if (distance > $b4e14b6b8da86996$var$globalParams.radius * 2 && distance < rule.distance) {\n        let F = 0;\n        if (typeof rule.attraction === \"function\") F = rule.attraction();\n        else F = rule.attraction;\n        F /= distance;\n        fx = F * dx;\n        fy = F * dy;\n    } else if (distance < $b4e14b6b8da86996$var$globalParams.radius * 2) {\n        const F = 0.01 * $b4e14b6b8da86996$var$globalParams.nucleusRepulsion * (1 / (distance / ($b4e14b6b8da86996$var$globalParams.radius * 2)));\n        fx = -1 * F * dx;\n        fy = -1 * F * dy;\n        p2.vx = -1 * (p2.vx + fx) * (1 - $b4e14b6b8da86996$var$globalParams.friction / 2000) * (Math.random() * 0.9 + 0.2);\n        p2.vy = -1 * (p2.vy + fy) * (1 - $b4e14b6b8da86996$var$globalParams.friction / 2000) * (Math.random() * 0.9 + 0.2);\n    }\n    p1.vx = (p1.vx + fx) * (1 - $b4e14b6b8da86996$var$globalParams.friction / 2000);\n    p1.vy = (p1.vy + fy) * (1 - $b4e14b6b8da86996$var$globalParams.friction / 2000);\n    p1.x += p1.vx;\n    p1.y += p1.vy;\n    $b4e14b6b8da86996$var$bounceLimits(p1);\n// inifintyLoop(p1);\n}\nfunction $b4e14b6b8da86996$var$applyRules() {\n    for (const particle1 of $b4e14b6b8da86996$var$particles){\n        for (const particle2 of $b4e14b6b8da86996$var$particles){\n            if (particle1 === particle2) continue;\n            $b4e14b6b8da86996$var$applyAttraction(particle1, particle2);\n        }\n        if ($b4e14b6b8da86996$var$globalParams.gravity.enabled) $b4e14b6b8da86996$var$applyAttraction(particle1, {\n            x: particle1.x + Math.random() * 0.5 - 0.25,\n            y: $b4e14b6b8da86996$var$canvas.height,\n            group: \"gravity\",\n            vx: 0,\n            vy: $b4e14b6b8da86996$var$globalParams.gravity.force\n        });\n        if ($b4e14b6b8da86996$var$globalParams.mouseInteraction) $b4e14b6b8da86996$var$applyAttraction(particle1, {\n            x: $b4e14b6b8da86996$var$mousePosition.x,\n            y: $b4e14b6b8da86996$var$mousePosition.y,\n            group: \"mouse\",\n            vx: 0,\n            vy: 0\n        });\n    }\n}\nfunction $b4e14b6b8da86996$var$drawBoundingBox() {\n    // ctx.strokeStyle = \"white\";\n    const heightMargin = $b4e14b6b8da86996$var$canvas.height / 2 * ($b4e14b6b8da86996$var$globalParams.margin / 100);\n    const widthMargin = $b4e14b6b8da86996$var$canvas.width / 2 * ($b4e14b6b8da86996$var$globalParams.margin / 100);\n    $b4e14b6b8da86996$var$canvas.box(widthMargin - $b4e14b6b8da86996$var$globalParams.radius, heightMargin - $b4e14b6b8da86996$var$globalParams.radius, $b4e14b6b8da86996$var$canvas.width - widthMargin * 2 + $b4e14b6b8da86996$var$globalParams.radius * 2, $b4e14b6b8da86996$var$canvas.height - heightMargin * 2 + $b4e14b6b8da86996$var$globalParams.radius * 2, \"white\");\n}\nfunction $b4e14b6b8da86996$var$render() {\n    if ($b4e14b6b8da86996$var$globalParams.isRunning) $b4e14b6b8da86996$var$applyRules();\n    $b4e14b6b8da86996$var$canvas.clear($b4e14b6b8da86996$var$globalParams.backgroundOpacity);\n    for (const particle of $b4e14b6b8da86996$var$particles)if (particle.group !== \"mouse\" && particle.group !== \"gravity\") $b4e14b6b8da86996$var$canvas.circle(particle.x, particle.y, $b4e14b6b8da86996$var$globalParams.radius, $b4e14b6b8da86996$var$colorTheme.groups[particle.group]);\n    $b4e14b6b8da86996$var$drawBoundingBox();\n    window.requestAnimationFrame($b4e14b6b8da86996$var$render);\n}\n$b4e14b6b8da86996$var$render();\nfunction $b4e14b6b8da86996$var$randomColorChannelValue() {\n    return Math.round(Math.random() * 255);\n}\n$b4e14b6b8da86996$var$canvas.addEventListener(\"mousemove\", (event)=>{\n    $b4e14b6b8da86996$var$mousePosition.x = event.clientX;\n    $b4e14b6b8da86996$var$mousePosition.y = event.clientY;\n});\n$b4e14b6b8da86996$var$canvas.addEventListener(\"mousedown\", (event)=>{\n    $b4e14b6b8da86996$var$globalParams.mouseInteraction = true;\n});\n$b4e14b6b8da86996$var$canvas.addEventListener(\"mouseup\", (event)=>{\n    $b4e14b6b8da86996$var$globalParams.mouseInteraction = false;\n});\nfunction $b4e14b6b8da86996$var$randomizeRules() {\n    for (const rule of $b4e14b6b8da86996$var$rules){\n        rule.distance = Math.round(Math.random() * 1000);\n        rule.attraction = Math.random() * 2 - 1;\n    }\n    $b4e14b6b8da86996$var$updateDisplay($b4e14b6b8da86996$var$rulesFolder);\n}\nfunction $b4e14b6b8da86996$var$updateDisplay(folder) {\n    for (const controller of folder.controllers)controller.updateDisplay();\n    for (const subFolder of folder.folders)$b4e14b6b8da86996$var$updateDisplay(subFolder);\n}\n\n\n//# sourceMappingURL=index.388674b4.js.map\n","import { ParticleCanvas } from \"./shared\";\n\nconst globalParams = {\n  isRunning: false,\n  radius: 2,\n  edgeDumping: 0,\n  friction: 50,\n  nucleusRepulsion: 0.5,\n  margin: 0,\n  mouseInteraction: false,\n  backgroundOpacity: 1,\n\n  gravity: {\n    enabled: false,\n    force: 0.1,\n  },\n\n  randomizeRules: () => {\n    randomizeRules();\n  },\n};\n\n// @ts-expect-error\nconst controlGui = new lil.GUI();\ncontrolGui.close();\n\nconst globalSettingsFolder = controlGui.addFolder(\"Global settings\");\n\nglobalSettingsFolder.add(globalParams, \"isRunning\").name(\"Is running\");\n\nglobalSettingsFolder.add(globalParams, \"radius\", 1, 5).name(\"Particle radius\");\nglobalSettingsFolder\n  .add(globalParams, \"edgeDumping\", 0, 1, 0.01)\n  .name(\"Edge dumping\");\nglobalSettingsFolder\n  .add(globalParams, \"friction\", 0, 1_000, 0.1)\n  .name(\"Friction\");\nglobalSettingsFolder\n  .add(globalParams, \"nucleusRepulsion\", 0, 1, 0.01)\n  .name(\"Nucleus repulsion\");\nglobalSettingsFolder.add(globalParams, \"margin\", 0, 100, 1).name(\"Margin\");\nglobalSettingsFolder\n  .add(globalParams, \"mouseInteraction\")\n  .name(\"Mouse interaction\");\nglobalSettingsFolder\n  .add(globalParams, \"backgroundOpacity\", 0, 1, 0.01)\n  .name(\"Background opacity\");\nglobalSettingsFolder\n  .add(globalParams, \"randomizeRules\")\n  .name(\"Randomize rules\");\n\nglobalSettingsFolder\n  .add(globalParams.gravity, \"enabled\")\n  .name(\"Gravity enabled\");\nglobalSettingsFolder\n  .add(globalParams.gravity, \"force\", 0, 1, 0.01)\n  .name(\"Gravity force\");\n\nconst canvas = new ParticleCanvas(\"canvas\");\n\n// const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n// const ctx = canvas.getContext(\"2d\")!;\n\n// resizeCanvas();\n// window.addEventListener(\"resize\", resizeCanvas);\n\nconst GROUPS = [\"Group 1\", \"Group 2\", \"Group 3\"] as const;\n\nconst colorTheme = {\n  background: `rgba(0, 0, 0, ${globalParams.backgroundOpacity})`,\n  // groups: [\"#FF18C8\", \"#1BEAFF\", \"#7BFF00\"],\n  groups: {\n    [GROUPS[0]]: \"#FF18C8\",\n    [GROUPS[1]]: \"#1BEAFF\",\n    [GROUPS[2]]: \"#7BFF00\",\n  },\n} as const;\n\ntype ParticleGroup = (typeof GROUPS)[number];\ntype Group = ParticleGroup | \"mouse\" | \"gravity\";\n\ntype Rule = {\n  who: Group;\n  to: Group;\n  distance: number;\n  attraction: number | (() => number);\n};\n\ntype Particle = {\n  x: number;\n  y: number;\n  group: Group;\n  vx: number;\n  vy: number;\n};\n\nconst rules: Rule[] = [];\nfor (const who of GROUPS) {\n  for (const to of GROUPS) {\n    rules.push({\n      who,\n      to,\n      distance: 100,\n      attraction: 0,\n    });\n  }\n  rules.push({\n    who,\n    to: \"mouse\",\n    distance: 100,\n    attraction: 0,\n  });\n  rules.push({\n    who,\n    to: \"gravity\",\n    distance: Number.MAX_VALUE,\n    attraction: () => globalParams.gravity.force,\n  });\n}\n\nconst rulesFolder = controlGui.addFolder(\"Rules\");\nrulesFolder.close();\n\nfor (const group of GROUPS) {\n  const groupRules = rules.filter((r) => r.who === group && r.to !== \"gravity\");\n  const groupFolder = rulesFolder.addFolder(group);\n\n  groupFolder.addColor(colorTheme.groups, group).name(\"Color\");\n\n  for (const rule of groupRules) {\n    const ruleFolder = groupFolder.addFolder(rule.to);\n    ruleFolder.add(rule, \"distance\", 0, 1_000).name(\"Distance\");\n    ruleFolder.add(rule, \"attraction\", -1, 1, 0.01).name(\"Attraction\");\n    ruleFolder.close();\n  }\n  groupFolder.close();\n}\n\nconst mousePosition = {\n  x: 0,\n  y: 0,\n};\n\nfunction addParticles(group: ParticleGroup, count: number): Particle[] {\n  return Array.from({\n    length: count,\n  }).map(() => ({\n    x: Math.random() * canvas.width,\n    y: Math.random() * canvas.height,\n    group,\n    vx: (Math.random() - 1) / 1000,\n    vy: (Math.random() - 1) / 1000,\n  }));\n}\n\nconst particles: Particle[] = GROUPS.flatMap((c) => addParticles(c, 300));\n\nfunction bounceLimits(particle: Particle) {\n  const heightMargin = (canvas.height / 2) * (globalParams.margin / 100);\n  const widthMargin = (canvas.width / 2) * (globalParams.margin / 100);\n\n  if (particle.y > canvas.height - heightMargin) {\n    particle.vy *= -1 + globalParams.edgeDumping;\n    particle.y = canvas.height - heightMargin;\n  }\n  if (particle.y < heightMargin) {\n    particle.vy *= -1 + globalParams.edgeDumping;\n    particle.y = heightMargin;\n  }\n  if (particle.x > canvas.width - widthMargin) {\n    particle.vx *= -1 + globalParams.edgeDumping;\n    particle.x = canvas.width - widthMargin;\n  }\n  if (particle.x < 0 + widthMargin) {\n    particle.vx *= -1 + globalParams.edgeDumping;\n    particle.x = widthMargin;\n  }\n}\n\nfunction bounceDistance(p1: Particle, p2: Particle) {\n  const dx = p2.x - p1.x;\n  const dy = p2.y - p1.y;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return [distance, dx, dy];\n}\n\nfunction infinityDistance(p1: Particle, p2: Particle) {\n  const dx = p2.x - p1.x;\n  const dy = p2.y - p1.y;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return [distance, dx, dy];\n}\n\nfunction inifintyLoop(particle: Particle) {\n  if (particle.y > canvas.height) {\n    particle.y = 0;\n  }\n  if (particle.y < 0) {\n    particle.y = canvas.height;\n  }\n  if (particle.x > canvas.width) {\n    particle.x = 0;\n  }\n  if (particle.x < 0) {\n    particle.x = canvas.width;\n  }\n}\n\nfunction applyAttraction(p1: Particle, p2: Particle) {\n  const rule = rules.find((r) => {\n    return r.who === p1.group && r.to === p2.group;\n  });\n\n  if (!rule) {\n    return;\n  }\n\n  let fx = 0;\n  let fy = 0;\n\n  const [distance, dx, dy] = bounceDistance(p1, p2);\n\n  if (distance > globalParams.radius * 2 && distance < rule.distance) {\n    let F = 0;\n    if (typeof rule.attraction === \"function\") {\n      F = rule.attraction();\n    } else {\n      F = rule.attraction;\n    }\n    F /= distance;\n    fx = F * dx;\n    fy = F * dy;\n  } else if (distance < globalParams.radius * 2) {\n    const F =\n      0.01 *\n      globalParams.nucleusRepulsion *\n      (1 / (distance / (globalParams.radius * 2)));\n    fx = -1 * F * dx;\n    fy = -1 * F * dy;\n\n    p2.vx =\n      -1 *\n      (p2.vx + fx) *\n      (1 - globalParams.friction / 2_000) *\n      (Math.random() * 0.9 + 0.2);\n    p2.vy =\n      -1 *\n      (p2.vy + fy) *\n      (1 - globalParams.friction / 2_000) *\n      (Math.random() * 0.9 + 0.2);\n  }\n  p1.vx = (p1.vx + fx) * (1 - globalParams.friction / 2_000);\n  p1.vy = (p1.vy + fy) * (1 - globalParams.friction / 2_000);\n  p1.x += p1.vx;\n  p1.y += p1.vy;\n\n  bounceLimits(p1);\n  // inifintyLoop(p1);\n}\n\nfunction applyRules() {\n  for (const particle1 of particles) {\n    for (const particle2 of particles) {\n      if (particle1 === particle2) {\n        continue;\n      }\n      applyAttraction(particle1, particle2);\n    }\n    if (globalParams.gravity.enabled) {\n      applyAttraction(particle1, {\n        x: particle1.x + Math.random() * 0.5 - 0.25,\n        y: canvas.height,\n        group: \"gravity\",\n        vx: 0,\n        vy: globalParams.gravity.force,\n      });\n    }\n    if (globalParams.mouseInteraction) {\n      applyAttraction(particle1, {\n        x: mousePosition.x,\n        y: mousePosition.y,\n        group: \"mouse\",\n        vx: 0,\n        vy: 0,\n      });\n    }\n  }\n}\n\nfunction drawBoundingBox() {\n  // ctx.strokeStyle = \"white\";\n  const heightMargin = (canvas.height / 2) * (globalParams.margin / 100);\n  const widthMargin = (canvas.width / 2) * (globalParams.margin / 100);\n\n  canvas.box(\n    widthMargin - globalParams.radius,\n    heightMargin - globalParams.radius,\n    canvas.width - widthMargin * 2 + globalParams.radius * 2,\n    canvas.height - heightMargin * 2 + globalParams.radius * 2,\n    \"white\"\n  );\n}\n\nfunction render() {\n  if (globalParams.isRunning) {\n    applyRules();\n  }\n  canvas.clear(globalParams.backgroundOpacity);\n  for (const particle of particles) {\n    if (particle.group !== \"mouse\" && particle.group !== \"gravity\") {\n      canvas.circle(\n        particle.x,\n        particle.y,\n        globalParams.radius,\n        colorTheme.groups[particle.group]\n      );\n    }\n  }\n  drawBoundingBox();\n  window.requestAnimationFrame(render);\n}\nrender();\n\nfunction randomColorChannelValue() {\n  return Math.round(Math.random() * 255);\n}\n\ncanvas.addEventListener(\"mousemove\", (event) => {\n  mousePosition.x = event.clientX;\n  mousePosition.y = event.clientY;\n});\n\ncanvas.addEventListener(\"mousedown\", (event) => {\n  globalParams.mouseInteraction = true;\n});\n\ncanvas.addEventListener(\"mouseup\", (event) => {\n  globalParams.mouseInteraction = false;\n});\n\nfunction randomizeRules() {\n  for (const rule of rules) {\n    rule.distance = Math.round(Math.random() * 1_000);\n    rule.attraction = Math.random() * 2 - 1;\n  }\n\n  updateDisplay(rulesFolder);\n}\n\ntype Controller = {\n  updateDisplay: () => void;\n};\ntype Folder = {\n  controllers: Controller[];\n  folders: Folder[];\n};\n\nfunction updateDisplay(folder: Folder) {\n  for (const controller of folder.controllers) {\n    controller.updateDisplay();\n  }\n  for (const subFolder of folder.folders) {\n    updateDisplay(subFolder);\n  }\n}\n","console.log(\"Hello from shared.ts\");\n\nexport class ParticleCanvas implements Partial<HTMLCanvasElement> {\n  canvas: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n\n  get width() {\n    return this.canvas.width;\n  }\n\n  get height() {\n    return this.canvas.height;\n  }\n\n  private resizeCanvas() {\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n  }\n\n  constructor(id: string) {\n    this.canvas = document.getElementById(id)! as HTMLCanvasElement;\n    this.ctx = this.canvas.getContext(\"2d\")!;\n    this.resizeCanvas();\n    window.addEventListener(\"resize\", this.resizeCanvas);\n  }\n\n  clear(opacity: number = 1) {\n    this.ctx.fillStyle = `rgba(0, 0, 0, ${opacity})`;\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  box(x: number, y: number, width: number, height: number, color: string) {\n    this.ctx.fillStyle = color;\n    this.ctx.strokeRect(x, y, width, height);\n  }\n\n  circle(x: number, y: number, radius: number, color: string) {\n    this.ctx.fillStyle = color;\n    this.ctx.beginPath();\n    this.ctx.ellipse(\n      x - radius / 2,\n      y - radius / 2,\n      radius,\n      radius,\n      0,\n      0,\n      2 * Math.PI\n    );\n    this.ctx.fill();\n  }\n\n  addEventListener(\n    evenName: string,\n    listener: {\n      (event: any): void;\n      (event: any): void;\n      (event: any): void;\n      (this: HTMLCanvasElement, ev: any): any;\n    }\n  ) {\n    this.canvas.addEventListener(evenName, listener);\n  }\n}\n"],"names":["console","log","$b4e14b6b8da86996$var$globalParams","isRunning","radius","edgeDumping","friction","nucleusRepulsion","margin","mouseInteraction","backgroundOpacity","gravity","enabled","force","randomizeRules","$b4e14b6b8da86996$var$randomizeRules","rule","$b4e14b6b8da86996$var$rules","distance","Math","round","random","attraction","$b4e14b6b8da86996$var$updateDisplay","folder","controller","controllers","updateDisplay","subFolder","folders","$b4e14b6b8da86996$var$rulesFolder","$b4e14b6b8da86996$var$controlGui","lil","GUI","close","$b4e14b6b8da86996$var$globalSettingsFolder","addFolder","add","name","$b4e14b6b8da86996$var$canvas","width","canvas","height","resizeCanvas","window","innerWidth","innerHeight","constructor","id","document","getElementById","ctx","getContext","addEventListener","clear","opacity","fillStyle","fillRect","box","x","y","color","strokeRect","circle","beginPath","ellipse","PI","fill","evenName","listener","$b4e14b6b8da86996$var$GROUPS","$b4e14b6b8da86996$var$colorTheme","background","groups","who","to","push","Number","MAX_VALUE","group","groupRules","filter","r","groupFolder","addColor","ruleFolder","$b4e14b6b8da86996$var$mousePosition","$b4e14b6b8da86996$var$particles","flatMap","c","Array","from","length","map","vx","vy","$b4e14b6b8da86996$var$applyAttraction","p1","p2","find","fx","fy","dx","dy","$b4e14b6b8da86996$var$bounceDistance","sqrt","F","$b4e14b6b8da86996$var$bounceLimits","particle","heightMargin","widthMargin","$b4e14b6b8da86996$var$render","$b4e14b6b8da86996$var$applyRules","particle1","particle2","$b4e14b6b8da86996$var$drawBoundingBox","requestAnimationFrame","event","clientX","clientY"],"version":3,"file":"index.388674b4.js.map"}